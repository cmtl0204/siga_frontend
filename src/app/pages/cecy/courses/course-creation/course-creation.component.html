<div class="card">
  <!-- Formulario -->
  <div class="p-fluid p-formgrid p-grid">
    <div class="p-field p-col-12 p-md-3">
      <label for="city">Nombre del curso</label>
      <p-autoComplete
        [(ngModel)]="courseSelected"
        (ngModelChange)="getById()"
        [suggestions]="filteredCourses"
        (completeMethod)="searchCourse($event)"
        [dropdown]="true"
        field="name" 
        placeholder="Seleccione el curso"
      >
      </p-autoComplete>
    </div>
    <div class="p-field p-col-12 p-md-3">
      <label for="currency-germany">Codigo del curso</label>
      <p-inputNumber
        id="code"
        [(ngModel)]="courseSelectedData.code"
      >
      </p-inputNumber>
    </div>
    <div class="p-field p-col-12 p-md-3">
      <label for="state">Gratis</label>
      <p-selectButton
        id="free"
        [(ngModel)]="courseSelectedData.free"
        [options]="Options"
        optionLabel="label"
        optionValue="value"
      >
      </p-selectButton>
    </div>
    <div *ngIf="courseSelectedData.free === false" class="p-field p-col-12 p-md-3">
      <label for="currency-germany">Costo</label>
      <p-inputNumber
        id="cost"
        [(ngModel)]="courseSelectedData.cost"
        mode="currency"
        currency="USD"
        placeholder="Ingrese el costo del curso "
      >
      </p-inputNumber>
    </div>
    <div class="p-field p-col-12 p-md-3">
      <label for="state">Tipo de Curso</label>
      <p-autoComplete
        id="course_type_id"
        [(ngModel)]="courseSelectedData.course_type_id"
        [suggestions]="filteredType"
        (completeMethod)="searchType($event)"
        [dropdown]="true"
        field="name" 
        required
        placeholder="Seleccione el tipo de curso"
      >
      </p-autoComplete>
    </div>
    <div class="p-field p-col-12 p-md-3">
      <label for="state">Modalidad</label>
      <p-autoComplete
        id="modality_id"
        [(ngModel)]="courseSelectedData.modality_id"
        [suggestions]="filteredModality"
        (completeMethod)="searchModality($event)"
        [dropdown]="true"
        field="name"
        required
        placeholder="Seleccione la modalidad"
      >
      </p-autoComplete>
    </div>
    <div class="p-field p-col-12 p-md-3">
      <label for="zip">Horas de duración</label>
      <p-inputNumber
        id="hours_duration"
        [(ngModel)]="courseSelectedData.hours_duration"
        placeholder="Tiempo que durará el curso"
      >
      </p-inputNumber>
    </div>
    <div class="p-field p-col-12 p-md-3">
      <label for="zip">Cantidad de particiantes</label>
      <p-inputNumber
        id="capacity"
        [(ngModel)]="courseSelectedData.capacity"
        mode="decimal"
        [showButtons]="true"
        [min]="0"
        [max]="100"
        placeholder="Ingrese el numero de participantes"
      >
      </p-inputNumber>
    </div>
    <div class="p-field p-col-12 p-md-6">
      <label for="city">Lugar donde se impartira el curso</label>
      <input
        id="place"
        [(ngModel)]="courseSelectedData.place"
        type="text"
        pInputText
        placeholder="Ingrese el lugar donde se impartira el curso"
      />
    </div>
    <div class="p-field p-col-12 p-md-6">
      <label for="city">Población del curso</label>
      <input
        id="Target_group"
        [(ngModel)]="courseSelectedData.Target_group"
        type="text"
        pInputText
        placeholder="Ingrese a que población se dirige el curso"
      />
    </div>
    <div class="p-field p-col-12 p-md-12">
      <label for="address">Resumen del curso y posible proyecto</label>
      <textarea 
        id="summary"
        [(ngModel)]="courseSelectedData.summary"
        rows="5"
        cols="30"
        pInputTextarea
        autoResize="autoResize"
        placeholder="Ingrese el resumen del curso"
      >
      </textarea>
    </div>
    

    <!-- Tabla de las necesidades -->

    <div class="p-field p-col-12 p-md-12">
      <p-toolbar styleClass="p-mb-4">
        <ng-template pTemplate="left">
          Agregar Necesidades
        </ng-template>
        <ng-template pTemplate="right">
          <button
            pButton
            pRipple
            type="button"
            label="Agregar"
            class="p-button-success"
            (click)="openNeeds()"
          >
          </button>
        </ng-template>
      </p-toolbar>
      <p-table
        #dt
        [value]="courseSelectedData.needs"
        [(ngModel)]="courseSelectedData.needs"
        [columns]= "cols"
        [rows]="5"
      >
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th *ngFor="let col of cols">
                {{col.header}}
              </th>
              <th>
                Opciones
              </th>
          </tr>
          </ng-template>
          <ng-template pTemplate="body" let-courseSelectedData let-columns="columns">
            <tr>
              <td>
                {{courseSelectedData}}
              </td>
              <td>
                <button
                  pButton
                  pRipple
                  icon="pi pi-trash"
                  class="p-button-rounded p-button-warning"
                >
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>
    </div>
  </div>
  <div>
    <button 
    pButton
    pRipple
    label="Cancelar"
    class="p-button-danger"
  >
  </button>
  <button 
    pButton
    pRipple
    label="Guardar"
    class="p-button-success"
    (click)="updateCourse()"
  >
  </button>
  </div>
</div>

 <!-- Dialogo para creación de necesidades -->
<p-dialog
  [(visible)]="showDialog"
  [style]="{ width: '700px'}"
  header="Registro de necesidades del curso"
  [modal]="true"
  styleClass="p-fluid"
> 
    <ng-template pTemplate="content">
      <div class="p-field">
        <label for="need">Necesidades</label>
        <input
          [(ngModel)]="need"
          id="needs"
          rows="1"
          pInputText
          required
          autoResize="autoResize"
        />
      </div>
    </ng-template>


<ng-template pTemplate="footer">
    <button 
      pButton
      pRipple
      label="Cancel"
      icon="pi pi-times"
      class="p-button-text"
      (click)="close()"
    >
    </button>
    <button 
      pButton
      pRipple
      label="Save"
      icon="pi pi-check"
      class="p-button-text"
      (click)="addNeeds()"
    >
    </button>
</ng-template>
</p-dialog>