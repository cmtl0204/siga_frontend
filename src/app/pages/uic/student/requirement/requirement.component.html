<div class="p-fluid">
  <p-accordion>
    <p-accordionTab
      header="Documentos Faltantes"
      [selected]="requirements?.length > 0"
    >
      <div class="p-grid">
        <p-card
          *ngFor="let requirement of requirements"
          class="p-xl-4 p-lg-4 p-md-6 p-sm-12"
        >
          <div class="p-formgrid p-grid">
            <h5 class="p-button-link p-xl-12 p-lg-12 p-md-12 p-sm-12">
              {{ requirement.name }}
            </h5>
          </div>

          <div class="p-field">
            <app-upload-files
              [acceptAttributes]="'.pdf'"
              (files)="storeRequirement($event, requirement.id)"
            ></app-upload-files>
          </div>

          <div *ngIf="requirement.is_solicitable == true" class="p-field p-col">
            <button
              pButton
              pRipple
              type="button"
              id="btnSaveContinue"
              label="Solicitar documento"
              class="p-button-warning p-button-raised"
              icon="pi pi-question-circle"
            ></button>
          </div>
        </p-card>
      </div>
    </p-accordionTab>

    <p-accordionTab
      header="Mis documentos"
      [selected]="studentRequirements?.length > 0"
    >
      <div class="p-grid">
        <p-card
          *ngFor="let document of studentRequirements"
          class="p-xl-4 p-lg-4 p-md-6 p-sm-12"
        >
          <div class="p-fluid">
            <div class="p-formgrid p-grid">
              <h5 class="p-button-link p-xl-12 p-lg-12 p-md-12 p-sm-12">
                {{ document.requirement.name }}
              </h5>
            </div>
            <div class="p-field" style="text-align: center">
              <button
                pButton
                pRipple
                id="btnDownload1"
                class="p-button-link"
                (click)="download(document.files[0])"
                [label]="
                  document.files[0].name + '.' + document.files[0].extension
                "
                *ngIf="document.files[0]"
              ></button>
            </div>
            <div class="p-field" style="text-align: center">
              <button
                pButton
                pRipple
                id="btnDownload"
                pTooltip="Descargar"
                class="p-button-info p-button-rised"
                icon="pi pi-download"
                (click)="download(document.files[0])"
              ></button>
              <button
                *ngIf="
                  document?.is_approved === false ||
                  document?.is_approved == null
                "
                pButton
                pRipple
                id="btnDelete"
                pTooltip="Eliminar"
                class="p-button-danger p-button-rised p-ml-2"
                icon="pi pi-trash"
                (click)="deleteDocuments(document)"
              ></button>
            </div>
          </div>

          <div class="p-fluid">
            <p-message
              severity="success"
              text="Aprobado"
              styleClass="p-mr-2"
              *ngIf="document.is_approved"
            ></p-message>
            <p-message
              severity="warn"
              text="En espera"
              styleClass="p-mr-2"
              *ngIf="document.is_approved == null"
            ></p-message>
            <p-message
              severity="error"
              text="No aprobado"
              styleClass="p-mr-2"
              *ngIf="document.is_approved == false"
            ></p-message>
          </div>
        </p-card>
      </div>
    </p-accordionTab>
  </p-accordion>
</div>
